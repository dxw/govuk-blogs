if(!String.prototype.endsWith){String.prototype.endsWith=function(e,t){if(t===undefined||t>this.length){t=this.length}return this.substring(t-e.length,t)===e}}(function(){"use strict";var e=this;if(typeof e.GOVUK==="undefined"){e.GOVUK={}}GOVUK.cookie=function(e,t,r){if(typeof t!=="undefined"){if(t===false||t===null){return GOVUK.setCookie(e,"",{days:-1})}else{return GOVUK.setCookie(e,t,r)}}else{return GOVUK.getCookie(e)}};GOVUK.setCookie=function(e,t,r){if(typeof r==="undefined"){r={}}var n=e+"="+t+"; path=/";if(r.days){var i=new Date;i.setTime(i.getTime()+r.days*24*60*60*1e3);n=n+"; expires="+i.toGMTString()}if(document.location.protocol=="https:"){n=n+"; Secure"}document.cookie=n};GOVUK.getCookie=function(e){var t=e+"=";var r=document.cookie.split(";");for(var n=0,i=r.length;n<i;n++){var a=r[n];while(a.charAt(0)==" "){a=a.substring(1,a.length)}if(a.indexOf(t)===0){return decodeURIComponent(a.substring(t.length))}}return null}}).call(this);(function(){"use strict";var e=this;if(typeof e.GOVUK==="undefined"){e.GOVUK={}}GOVUK.addCookieMessage=function(){var e=document.getElementById("global-cookie-message"),t=e&&GOVUK.cookie("seen_cookie_message")===null;if(t){e.style.display="block";GOVUK.cookie("seen_cookie_message","yes",{days:28})}}}).call(this);(function(e,i,a){var t="placeholder"in i.createElement("input"),r="placeholder"in i.createElement("textarea"),n=a.fn,o=a.valHooks,s,l;if(t&&r){l=n.placeholder=function(){return this};l.input=l.textarea=true}else{l=n.placeholder=function(){var e=this;e.filter((t?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":f}).data("placeholder-enabled",true).trigger("blur.placeholder");return e};l.input=t;l.textarea=r;s={get:function(e){var t=a(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var r=a(e);if(!r.data("placeholder-enabled")){return e.value=t}if(t==""){e.value=t;if(e!=i.activeElement){f.call(e)}}else if(r.hasClass("placeholder")){c.call(e,true,t)||(e.value=t)}else{e.value=t}return r}};t||(o.input=s);r||(o.textarea=s);a(function(){a(i).delegate("form","submit.placeholder",function(){var e=a(".placeholder",this).each(c);setTimeout(function(){e.each(f)},10)})});a(e).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})})}function u(e){var r={},n=/^jQuery\d+$/;a.each(e.attributes,function(e,t){if(t.specified&&!n.test(t.name)){r[t.name]=t.value}});return r}function c(e,t){var r=this,n=a(r);if(r.value==n.attr("placeholder")&&n.hasClass("placeholder")){if(n.data("placeholder-password")){n=n.hide().next().show().attr("id",n.removeAttr("id").data("placeholder-id"));if(e===true){return n[0].value=t}n.focus()}else{r.value="";n.removeClass("placeholder");r==i.activeElement&&r.select()}}}function f(){var t,e=this,r=a(e),n=r,i=this.id;if(e.value==""){if(e.type=="password"){if(!r.data("placeholder-textinput")){try{t=r.clone().attr({type:"text"})}catch(e){t=a("<input>").attr(a.extend(u(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":true,"placeholder-id":i}).bind("focus.placeholder",c);r.data({"placeholder-textinput":t,"placeholder-id":i}).before(t)}r=r.removeAttr("id").hide().prev().attr("id",i).show()}r.addClass("placeholder");r[0].value=r.attr("placeholder")}else{r.removeClass("placeholder")}}})(this,document,jQuery);(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof module==="object"&&module.exports){e(require("jquery"))}else{e(jQuery)}})(function(o){var s=false;var e=Object.prototype.toString.call(window.operamini)==="[object OperaMini]";var r="placeholder"in document.createElement("input")&&!e&&!s;var t="placeholder"in document.createElement("textarea")&&!e&&!s;var n=o.valHooks;var i=o.propHooks;var a;var l;var u={};if(r&&t){l=o.fn.placeholder=function(){return this};l.input=true;l.textarea=true}else{l=o.fn.placeholder=function(e){var t={customClass:"placeholder"};u=o.extend({},t,e);return this.filter((r?"textarea":":input")+"["+(s?"placeholder-x":"placeholder")+"]").not("."+u.customClass).not(":radio, :checkbox, [type=hidden]").bind({"focus.placeholder":f,"blur.placeholder":d}).data("placeholder-enabled",true).trigger("blur.placeholder")};l.input=r;l.textarea=t;a={get:function(e){var t=o(e);var r=t.data("placeholder-password");if(r){return r[0].value}return t.data("placeholder-enabled")&&t.hasClass(u.customClass)?"":e.value},set:function(e,t){var r=o(e);var n;var i;if(t!==""){n=r.data("placeholder-textinput");i=r.data("placeholder-password");if(n){f.call(n[0],true,t)||(e.value=t);n[0].value=t}else if(i){f.call(e,true,t)||(i[0].value=t);e.value=t}}if(!r.data("placeholder-enabled")){e.value=t;return r}if(t===""){e.value=t;if(e!=h()){d.call(e)}}else{if(r.hasClass(u.customClass)){f.call(e)}e.value=t}return r}};if(!r){n.input=a;i.value=a}if(!t){n.textarea=a;i.value=a}o(function(){o(document).delegate("form","submit.placeholder",function(){var e=o("."+u.customClass,this).each(function(){f.call(this,true,"")});setTimeout(function(){e.each(d)},10)})});o(window).bind("beforeunload.placeholder",function(){var e=true;try{if(document.activeElement.toString()==="javascript:void(0)"){e=false}}catch(e){}if(e){o("."+u.customClass).each(function(){this.value=""})}})}function c(e){var r={};var n=/^jQuery\d+$/;o.each(e.attributes,function(e,t){if(t.specified&&!n.test(t.name)){r[t.name]=t.value}});return r}function f(e,t){var r=this;var n=o(this);if(r.value===n.attr(s?"placeholder-x":"placeholder")&&n.hasClass(u.customClass)){r.value="";n.removeClass(u.customClass);if(n.data("placeholder-password")){n=n.hide().nextAll('input[type="password"]:first').show().attr("id",n.removeAttr("id").data("placeholder-id"));if(e===true){n[0].value=t;return t}n.focus()}else{r==h()&&r.select()}}}function d(e){var t;var r=this;var n=o(this);var i=r.id;if(e&&e.type==="blur"&&n.hasClass(u.customClass)){return}if(r.value===""){if(r.type==="password"){if(!n.data("placeholder-textinput")){try{t=n.clone().prop({type:"text"})}catch(e){t=o("<input>").attr(o.extend(c(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-enabled":true,"placeholder-password":n,"placeholder-id":i}).bind("focus.placeholder",f);n.data({"placeholder-textinput":t,"placeholder-id":i}).before(t)}r.value="";n=n.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",n.data("placeholder-id")).show()}else{var a=n.data("placeholder-password");if(a){a[0].value="";n.attr("id",n.data("placeholder-id")).show().nextAll('input[type="password"]:last').hide().removeAttr("id")}}n.addClass(u.customClass);n[0].value=n.attr(s?"placeholder-x":"placeholder")}else{n.removeClass(u.customClass)}}function h(){try{return document.activeElement}catch(e){}}});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):e.ES6Promise=t()})(this,function(){"use strict";function n(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function l(e){return typeof e==="function"}var e=void 0;if(Array.isArray){e=Array.isArray}else{e=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}var r=e;var i=0;var t=void 0;var a=void 0;var o=function e(t,r){m[i]=t;m[i+1]=r;i+=2;if(i===2){if(a){a(y)}else{g()}}};function s(e){a=e}function u(e){o=e}var c=typeof window!=="undefined"?window:undefined;var f=c||{};var d=f.MutationObserver||f.WebKitMutationObserver;var h=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var p=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function P(){return function(){return process.nextTick(y)}}function q(){if(typeof t!=="undefined"){return function(){t(y)}}return v()}function Q(){var e=0;var t=new d(y);var r=document.createTextNode("");t.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function z(){var e=new MessageChannel;e.port1.onmessage=y;return function(){return e.port2.postMessage(0)}}function v(){var e=setTimeout;return function(){return e(y,1)}}var m=new Array(1e3);function y(){for(var e=0;e<i;e+=2){var t=m[e];var r=m[e+1];t(r);m[e]=undefined;m[e+1]=undefined}i=0}function I(){try{var e=Function("return this")().require("vertx");t=e.runOnLoop||e.runOnContext;return q()}catch(e){return v()}}var g=void 0;if(h){g=P()}else if(d){g=Q()}else if(p){g=z()}else if(c===undefined&&typeof require==="function"){g=I()}else{g=v()}function b(e,t){var r=this;var n=new this.constructor(k);if(n[w]===undefined){K(n)}var i=r._state;if(i){var a=arguments[i-1];o(function(){return M(i,n,a,r._result)})}else{S(r,n,e,t)}return n}function _(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var r=new t(k);j(r,e);return r}var w=Math.random().toString(36).substring(2);function k(){}var C=void 0;var x=1;var E=2;function W(){return new TypeError("You cannot resolve a promise with itself")}function $(){return new TypeError("A promises callback cannot return that same promise.")}function B(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function D(e,n,i){o(function(t){var r=false;var e=B(i,n,function(e){if(r){return}r=true;if(n!==e){j(t,e)}else{O(t,e)}},function(e){if(r){return}r=true;T(t,e)},"Settle: "+(t._label||" unknown promise"));if(!r&&e){r=true;T(t,e)}},e)}function F(t,e){if(e._state===x){O(t,e._result)}else if(e._state===E){T(t,e._result)}else{S(e,undefined,function(e){return j(t,e)},function(e){return T(t,e)})}}function A(e,t,r){if(t.constructor===e.constructor&&r===b&&t.constructor.resolve===_){F(e,t)}else{if(r===undefined){O(e,t)}else if(l(r)){D(e,t,r)}else{O(e,t)}}}function j(t,e){if(t===e){T(t,W())}else if(n(e)){var r=void 0;try{r=e.then}catch(e){T(t,e);return}A(t,e,r)}else{O(t,e)}}function H(e){if(e._onerror){e._onerror(e._result)}U(e)}function O(e,t){if(e._state!==C){return}e._result=t;e._state=x;if(e._subscribers.length!==0){o(U,e)}}function T(e,t){if(e._state!==C){return}e._state=E;e._result=t;o(H,e)}function S(e,t,r,n){var i=e._subscribers;var a=i.length;e._onerror=null;i[a]=t;i[a+x]=r;i[a+E]=n;if(a===0&&e._state){o(U,e)}}function U(e){var t=e._subscribers;var r=e._state;if(t.length===0){return}var n=void 0,i=void 0,a=e._result;for(var o=0;o<t.length;o+=3){n=t[o];i=t[o+r];if(n){M(r,n,i,a)}else{i(a)}}e._subscribers.length=0}function M(e,t,r,n){var i=l(r),a=void 0,o=void 0,s=true;if(i){try{a=r(n)}catch(e){s=false;o=e}if(t===a){T(t,$());return}}else{a=n}if(t._state!==C){}else if(i&&s){j(t,a)}else if(s===false){T(t,o)}else if(e===x){O(t,a)}else if(e===E){T(t,a)}}function Y(r,e){try{e(function e(t){j(r,t)},function e(t){T(r,t)})}catch(e){T(r,e)}}var G=0;function L(){return G++}function K(e){e[w]=G++;e._state=undefined;e._result=undefined;e._subscribers=[]}function R(){return new Error("Array Methods must be provided an Array")}var N=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(k);if(!this.promise[w]){K(this.promise)}if(r(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){O(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0){O(this.promise,this._result)}}}else{T(this.promise,R())}}e.prototype._enumerate=function e(t){for(var r=0;this._state===C&&r<t.length;r++){this._eachEntry(t[r],r)}};e.prototype._eachEntry=function e(t,r){var n=this._instanceConstructor;var i=n.resolve;if(i===_){var a=void 0;var o=void 0;var s=false;try{a=t.then}catch(e){s=true;o=e}if(a===b&&t._state!==C){this._settledAt(t._state,r,t._result)}else if(typeof a!=="function"){this._remaining--;this._result[r]=t}else if(n===V){var l=new n(k);if(s){T(l,o)}else{A(l,t,a)}this._willSettleAt(l,r)}else{this._willSettleAt(new n(function(e){return e(t)}),r)}}else{this._willSettleAt(i(t),r)}};e.prototype._settledAt=function e(t,r,n){var i=this.promise;if(i._state===C){this._remaining--;if(t===E){T(i,n)}else{this._result[r]=n}}if(this._remaining===0){O(i,this._result)}};e.prototype._willSettleAt=function e(t,r){var n=this;S(t,undefined,function(e){return n._settledAt(x,r,e)},function(e){return n._settledAt(E,r,e)})};return e}();function J(e){return new N(this,e).promise}function X(i){var a=this;if(!r(i)){return new a(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new a(function(e,t){var r=i.length;for(var n=0;n<r;n++){a.resolve(i[n]).then(e,t)}})}}function Z(e){var t=this;var r=new t(k);T(r,e);return r}function ee(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function te(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var V=function(){function t(e){this[w]=L();this._result=this._state=undefined;this._subscribers=[];if(k!==e){typeof e!=="function"&&ee();this instanceof t?Y(this,e):te()}}t.prototype.catch=function e(t){return this.then(null,t)};t.prototype.finally=function e(t){var r=this;var n=r.constructor;if(l(t)){return r.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})}return r.then(t,t)};return t}();V.prototype.then=b;V.all=J;V.race=X;V.resolve=_;V.reject=Z;V._setScheduler=s;V._setAsap=u;V._asap=o;function re(){var e=void 0;if(typeof global!=="undefined"){e=global}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if(r==="[object Promise]"&&!t.cast){return}}e.Promise=V}V.polyfill=re;V.Promise=V;V.polyfill();return V});jQuery(function(o){"use strict";o(".js-categories-dropdown").change(function(e){var t=parseInt(this.value,10);if(t===0){location.href="/"}else{location.href="/?cat="+t}});var e=o("#comment"),t=o(".js-comment-extra"),r=e.height();t.hide();e.height(r/4);e.focus(function(){e.animate({height:r});t.slideDown()});o("input, textarea").placeholder();var n=o(window).width();if(n<768){o(".widget_categories ul").each(function(){var e=o(this),t=o(document.createElement("select")).insertBefore(o(this).hide()).addClass("category-list").change(function(){window.location.href=o(this).val()});o('<option selected="selected">Select Category</option>').appendTo(t);o(">li a",this).each(function(){var e=o(document.createElement("option")).appendTo(t).val(this.href).html(o(this).html())});e.remove()})}o(function(){o("input.search-query").data("holder",o("input.search-query").attr("placeholder"));o("input.search-query").focusin(function(){o(this).attr("placeholder","")});o("input.search-query").focusout(function(){o(this).attr("placeholder",o(this).data("holder"))})});o(window).resize(function(){if(o(window).width()<768){o(".widget_categories ul").not("hidden-mobile").each(function(){var e=o(this),t=o(document.createElement("select")).insertBefore(o(this).hide()).addClass("category-list").change(function(){window.location.href=o(this).val()});o('<option selected="selected">Select Category</option>').appendTo(t);o(">li a",this).each(function(){var e=o(document.createElement("option")).appendTo(t).val(this.href).html(o(this).html())});e.remove()})}else{o("select.category-list").parent().append('<ul class="categories"></ul>');o("select.category-list option:first-child").remove();o("select.category-list option").each(function(){o("ul.categories").append('<li class="cat-item"><a href="'+o(this).val()+'">'+o(this).text()+"</a></li>")});o("select.category-list").remove()}});o(".embedly-embed").css({position:"relative"}).parent().css({"padding-top":"0","padding-bottom":"0",height:"auto"});o(document).ready(function(){var e=GOVUK.getCookie("no-more-survey");if(e!="true"){o("#user-satisfaction-survey").show()}if(o("#user-satisfaction-survey").hasClass("non-dismissable")){o("#user-satisfaction-survey").show()}});o("#survey-no-thanks").click(function(){GOVUK.cookie("no-more-survey","true",{days:365});o("#user-satisfaction-survey").hide()});o("#take-survey").click(function(){GOVUK.cookie("no-more-survey","true",{days:365})});o("a").click(function(e){var t=o(e.currentTarget).attr("href");var r=new URL(t,document.location.href);var n=r.protocol==="https:";var i=r.hostname==="blog.gov.uk"||r.hostname.endsWith(".blog.gov.uk");if(n&&i){return}if(typeof ga!=="function"){return}var a=new Promise(function(e,t){setTimeout(t,500);ga("send","event","outbound","click",r.href,{transport:"beacon",hitCallback:e})});a.finally(function(){console.log("hi")})})});function scrollToId(e){var t=jQuery(e);jQuery("html,body").animate({scrollTop:t.offset().top},"slow")}function inputEmpty(e){if(e.hasClass("required")&&e.val()==""){return true}return false}function validEmail(e){var t=/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i;return t.test(e)}function invalidEmailInput(e){if(e.hasClass("required")&&!validEmail(e.val())){return true}return false}function addErrorPanel(e){jQuery("#comment-validation").remove();var t='<div id="comment-validation" class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">';t+='<h3 id="error-summary-title" class="govuk-error-summary__title">Please complete the required fields</h3><div class="govuk-error-summary__body"><ul class="govuk-list govuk-error-summary__list">';e.forEach(function(e){t+="<li>"+e+"</li>"});t+="</ul></div></div>";jQuery("#respond header").after(t)}function addErrorMarker(e,t){e.parent("div.govuk-form-group").addClass("govuk-form-group--error");e.siblings("label").append("<p class='govuk-error-message'>"+t+"</p>")}function removeErrorMarker(e){e.siblings("label").find("p.govuk-error-message").remove();e.parent("div.govuk-form-group").removeClass("govuk-form-group--error")}jQuery(function(a){"use strict";a("#commentform .govuk-button").click(function(){var e=[];var t=a("#commentform #comment");var r=a("#commentform #author");var n=a("#commentform #email");removeErrorMarker(t);removeErrorMarker(r);removeErrorMarker(n);if(inputEmpty(t)){var i="Please enter comment text";e.push("<a href='#comment_field'>"+i+"</a>");addErrorMarker(t,i)}if(inputEmpty(r)){var i="Please enter a name";e.push("<a href='#name_field'>"+i+"</a>");addErrorMarker(r,i)}if(invalidEmailInput(n)){var i="Please enter a valid email address";e.push("<a href='#email_field'>"+i+"</a>");addErrorMarker(n,i)}if(e.length>0){addErrorPanel(e);scrollToId("#comment-validation");return false}})});
//# sourceMappingURL=main.min.js.map